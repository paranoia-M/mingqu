name: Build and Archive on Push

on:
  push:
    branches:
      - main
      - develop

jobs:
  build_windows_exe:
    runs-on: windows-latest
    
    steps:
    # ... (ä»£ç çœç•¥) ...
    - name: Set up Python 3.9
      uses: actions/setup-python@v3
      with:
        python-version: '3.9'
        
    - name: Install dependencies
      # ... (ä»£ç çœç•¥) ...

    - name: Build the EXE with PyInstaller
      id: build_exe
      # ... (ä»£ç çœç•¥) ...
      
    - name: Archive Build Artifact
      # ğŸ‘‡ ä¿®å¤ç‚¹ï¼šå°† v3 å‡çº§åˆ° v4
      uses: actions/upload-artifact@v4  # <--- å·²ç»ä¿®å¤!
      with:
        # è¿™ä¸ª name æ˜¯è¾“å‡ºçš„ Artifact åç§°
        name: ChannelMonitor-${{ github.ref_name }}-${{ env.TIMESTAMP }}-Build
        path: dist/ChannelMonitor.exe # ç¡®ä¿è·¯å¾„æ­£ç¡®
        
      env:
        # å®šä¹‰ä¸€ä¸ªæ—¶é—´æˆ³å˜é‡ä¾› Artifact Name ä½¿ç”¨
        TIMESTAMP: ${{ github.sha }}